<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Schedule</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .progress {
            height: 30px;
        }
        .task-checkbox {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Your Daily Schedule</h1>
        
        <!-- Progress Bar -->
        <div class="progress">
            <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
        </div>
        
        <table class="table mt-4">
            <thead>
                <tr>
                    <th>Task</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Duration (hours)</th>
                    <th>Complete</th>
                </tr>
            </thead>
            <tbody id="taskList">
                {% for item in schedule %}
                <tr>
                    <td>{{ item.name }}</td>
                    <td>{{ item.start }}</td>
                    <td>{{ item.end }}</td>
                    <td>{{ item.duration }}</td>
                    <td>
                        <input type="checkbox" class="task-checkbox" onclick="updateProgress(this)" />
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <a href="{{ url_for('sleep') }}" class="btn btn-primary">Go Back</a>
    </div>

    <script>
        function updateProgress(checkbox) {
            const checkboxes = document.querySelectorAll('.task-checkbox');
            const totalTasks = checkboxes.length;
            const completedTasks = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
            const progressPercentage = (completedTasks / totalTasks) * 100;

            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progressPercentage + '%';
            progressBar.setAttribute('aria-valuenow', progressPercentage);
            progressBar.textContent = Math.round(progressPercentage) + '%';
        }
    </script>
</body>
</html>
